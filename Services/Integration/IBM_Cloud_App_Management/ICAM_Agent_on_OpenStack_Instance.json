{
  "service": {
    "specVersion": "v3",
    "version": "2.3.0.1",
    "catalog_metadata": {
      "name": "IBM Cloud App Management Integration Service on OpenStack",
      "description": "IBM Cloud App Management Integration Service on Linux guest deployed in an OpenStack cloud",
      "image": "serviceicon_1.svg",
      "category": "Integration Services",
      "bullets": [],
      "providerDisplayName": "IBM",
      "longDescription": "",
      "documentationUrl": "",
      "supportUrl": "",
      "bindable": false,
      "updatable": "",
      "systemTags": true,
      "author": "admin"
    },
    "tags": [
      {
        "name": "environment",
        "label": "Environment",
        "type": "string",
        "immutable": false,
        "hidden": false,
        "required": true,
        "secured": false,
        "description": "Unique identifer added to the provisioned VMs.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Write",
        "options": [
          {
            "label": "Development",
            "value": "dev",
            "default": true
          },
          {
            "label": "Quality Assurance",
            "value": "qa",
            "default": false
          },
          {
            "label": "Production",
            "value": "prod",
            "default": false
          },
          {
            "label": "Test",
            "value": "test",
            "default": false
          }
        ]
      },    
      {
        "name": "name",
        "label": "name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.name}"
      },      
      {
        "name": "request_group",
        "label": "request_group",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The current context group id of the current user that requested the provisioning of the template. This is important because a user may be part of more than one group and this identifies the context of which group the user made the request.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.group}"
      },
      {
        "name": "request_user",
        "label": "request_user",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The user id of the current user that requested the provisioning of the template.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.owner}"
      },
      {
        "name": "service_name",
        "label": "service_name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.name}"
      },
      {
        "name": "service_identifier",
        "label": "service_identifier",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Unique identifer generated by ICAM which is mapped to the service instance of the template provisioned.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.service_instance_id}"
      }
    ],
    "actions": [
      {
        "type": "provision",
        "name": "Provision",
        "description": "Default action for deployment of service",
        "input_parameters": [
          {
            "name": "cloud_connection",
            "label": "OpenStack Cloud Connection Name",
            "customtype": "connection",
            "type": "connection",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "Name of the OpenStack cloud connection.",
            "provider": "OpenStack",
            "default": ""
          },        
          {
            "name": "openstack_image_id",
            "label": "OpenStack Image ID",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "OpenStack Image ID"
          },
          {
            "name": "openstack_flavor_id",
            "label": "OpenStack Instance Flavor ID",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "OpenStack Flavor ID"
          },
          {
            "name": "openstack_network_name",
            "label": "OpenStack Network Name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "The name of the network to be used for deploy operations."
          },
          {
            "name": "openstack_image_id_username",
            "label": "OpenStack Image Username",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "The username to SSH into image ID"
          },
          {
            "name": "openstack_key_pair_name",
            "label": "OpenStack Instance Public Key Name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "The name of a ssh key pair which will be injected into the instance when they are created. The key pair must already be created and associated with the tenant's account. Changing key pair name creates a new instance."
          },
          {
            "name": "openstack_instance_name",
            "label": "OpenStack Instance Name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": ""
          },
          {
            "name": "openstack_instance_private_key",
            "label": "OpenStack Instance Private Key (base64 encoded)",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": true,
            "description": "Base64 encoded private key used to SSH into the OpenStack VM.",
            "default": ""
          }
        ],
        "flow": {
          "conditions": [],
          "templates": [
            {
              "OpenStack Single Virtual Machine": {
                "title": "OpenStack Single Virtual Machine_9b9236",
                "template_name": "OpenStack Single Virtual Machine",
                "version": "2.4",
                "id": "openstac852901d5",
                "template_type": "Terraform",
                "template_content_type": "OpenStack",
                "template_provider": "OpenStack",
                "instance_name": "",
                "cloud_connection_name": "${input_parameters.cloud_connection}",
                "template_data_objects": {},
                "template_params": {
                  "openstack_image_id": "${input_parameters.openstack_image_id}",
                  "openstack_flavor_id": "${input_parameters.openstack_flavor_id}",
                  "openstack_network_name": "${input_parameters.openstack_network_name}",
                  "instance_name": "${input_parameters.openstack_instance_name}",
                  "key_pair_name": "${input_parameters.openstack_key_pair_name}"
                },
                "outputs": [
                  "single-vm-ip",
                  "stack_id"
                ]
              }
            },
            {
              "IBM Cloud App Management Agent Installation Template": {
                "title": "IBM Cloud App Management Agent Installation Template_b3a83b",
                "template_name": "IBM Cloud App Management Agent Installation Template",
                "version": "2.2",
                "id": "ibmcloudd19aa81d",
                "template_type": "Terraform",
                "template_content_type": "Integration",
                "template_provider": "Other",
                "instance_name": "",
                "cloud_connection_name": "Other",
                "template_data_objects": {
                  "icam_agent": "fit-vm17-190-rtp-raleigh-ibm-com",
                  "bastionhost": "DefaultNoBastionHostRequired"
                },
                "template_params": {
                  "ip_address": "${templates.openstac852901d5.output.single-vm-ip}",
                  "user": "root",
                  "password": "",
                  "private_key": "${input_parameters.openstack_instance_private_key}"
                },
                "outputs": [
                  "icam_server_url"
                ],
                "provider_engine_version": "0.11.11"
              }
            }
          ],
          "resthooks": [],
          "notifications": [],
          "sequence": {
            "0": "openstac852901d5",
            "1": "ibmcloudd19aa81d"
          },
          "error_sequence": {}
        },
        "output_parameters": []
      }
    ],
    "plans": [
      {
        "name": "generic",
        "description": "Generic plan that requires user input",
        "actions": [],
        "plan_parameters": [
          {
            "name": "openstack_instance_name",
            "label": "OpenStack Instance Name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "OpenStack Instance Name",
            "default": ""
          },
          {
            "name": "openstack_image_id",
            "label": "OpenStack Image ID",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "OpenStack Image ID"
          },
          {
            "name": "openstack_flavor_id",
            "label": "OpenStack Instance Flavor ID",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "OpenStack Flavor ID"
          },
          {
            "name": "openstack_network_name",
            "label": "OpenStack Network Name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "The name of the network to be used for deploy operations."
          },
          {
            "name": "openstack_key_pair_name",
            "label": "OpenStack Instance Public Key Name",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "The name of a ssh key pair which will be injected into the instance when they are created. The key pair must already be created and associated with the tenant's account. Changing key pair name creates a new instance."
          },
          {
            "name": "openstack_instance_private_key",
            "label": "OpenStack Instance Private Key (base64 encoded)",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": true,
            "description": "Base64 encoded private key used to SSH into the OpenStack VM.",
            "default": ""
          }
        ]
      }
    ]
  }
}