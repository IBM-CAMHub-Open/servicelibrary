{
    "service": {
      "specVersion": "v3",
      "version": "3.2.1",
      "catalog_metadata": {
        "name": "ICP cluster upgrade",
        "description": "Upgrades the version of the ICP cluster",
        "image": "serviceicon_1.svg",
        "category": "Cluster Lifecycle Services",
        "bullets": [],
        "providerDisplayName": "IBM",
        "longDescription": "",
        "documentationUrl": "https://www.ibm.com/support/knowledgecenter/SS2L37_3.2.1.0/content/cam_content_overview_summary.html",
        "supportUrl": "https://www.ibm.com/support/knowledgecenter/SS2L37_3.2.1.0/cam_ordering_services.html",
        "bindable": false,
        "updatable": "",
        "systemTags": true,
        "author": "admin"
      },
      "tags": [
        {
          "name": "Request_Group",
          "label": "Request_Group",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "The current context group id of the current user that requested the provisioning of the template. This is important because a user may be part of more than one group and this identifies the context of which group the user made the request.",
          "isSystemTag": true,
          "default": "${svc_instance.group}",
          "customtype": "string",
          "permission": "Read-Only"
        },
        {
          "name": "Request_User",
          "label": "Request_User",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "The user id of the current user that requested the provisioning of the template.",
          "isSystemTag": true,
          "default": "${svc_instance.owner}",
          "customtype": "string",
          "permission": "Read-Only"
        },
        {
          "name": "Service_Name",
          "label": "Service_Name",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "Name provided for the service instance by the end user at time of request",
          "isSystemTag": true,
          "default": "${svc_instance.name}",
          "customtype": "string",
          "permission": "Read-Only"
        },
        {
          "name": "Service_Identifier",
          "label": "Service_Identifier",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "Unique identifer generated by ICAM which is mapped to the service instance of the template provisioned.",
          "isSystemTag": true,
          "default": "${svc_instance.service_instance_id}",
          "customtype": "string",
          "permission": "Read-Only"
        }
      ],
      "actions": [
        {
          "type": "provision",
          "name": "Provision",
          "description": "Default action for deployment of service",
          "input_parameters": [
            {
              "name": "boot_vm_ipv4_address",
              "label": "Boot node IPv4 address",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Boot node IPv4 address for ssh",
              "default": ""
            },
            {
              "name": "master_node_ip",
              "label": "Master node IPv4 address",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Master node IPv4 address for ssh",
              "default": ""
            },
            {
              "name": "vm_os_user",
              "label": "Boot node root user",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Boot node OS root user",
              "default": "root"
            },
            {
              "name": "vm_os_password",
              "label": "Boot node root password",
              "customtype": "password",
              "type": "password",
              "immutable": false,
              "hidden": false,
              "required": false,
              "secured": false,
              "description": "Boot node OS root password",
              "default": ""
            },
            {
              "name": "cluster_location",
              "label": "ICP cluster folder location",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "ICP cluster folder location at boot node",
              "default": "/root/ibm-cloud-private-x86_64-3.1.2/cluster"
            },
            {
              "name": "new_icp_version",
              "label": "New ICP version",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": true,
              "required": false,
              "secured": false,
              "default": "3.2.1",
              "description": "New ICP version to upgrade"
            },
            {
              "name": "new_icp_binary_url",
              "label": "New ICP binary URL",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "HTTP, HTTPS, URL for New / latest ICP.",
              "default": ""
            },
            {
              "name": "icp_cluster_name",
              "label": "ICP cluster",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "ICP cluster name",
              "default": "mycluster.icp"
            },
            {
              "name": "kube_apiserver_secure_port",
              "label": "Kube apiserver secure port",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": false,
              "secured": false,
              "description": "Kube apiserver secure port",
              "default": "8001"
            },
			{
				"name": "cloud_connection",
				"label": "Cloud Connection",
				"customtype": "string",
				"type": "connection",
				"provider": "IBM Cloud Private",
				"immutable": false,
				"hidden": false,
				"required": false,
				"secured": false,
				"description": "Cloud connection to connect to ICP cluster."
			}
          ],
          "flow": {
            "conditions": [],
            "templates": [
              {
                "IBM Cloud Private Upgrade": {
                  "title": "IBM Cloud Private Upgrade_8d0fdb",
                  "template_name": "IBM Cloud Private Upgrade",
                  "version": "3.2.1",
                  "id": "ibmcloud305e7b07",
                  "template_type": "Terraform",
                  "template_content_type": "IBM Cloud Private",
                  "template_provider": "IBM Cloud Private",
                  "instance_name": "",
                  "cloud_connection_name": "${input_parameters.cloud_connection}",
                  "template_data_objects": {
                    "bastionhost": "DefaultNoBastionHostRequired"
                  },
                  "template_params": {
                    "boot_vm_ipv4_address": "${input_parameters.boot_vm_ipv4_address}",
                    "master_node_ip": "${input_parameters.master_node_ip}",
                    "vm_os_user": "${input_parameters.vm_os_user}",
                    "vm_os_password": "${input_parameters.vm_os_password}",
                    "cluster_location": "${input_parameters.cluster_location}",
                    "new_icp_version": "${input_parameters.new_icp_version}",
                    "new_icp_binary_url": "${input_parameters.new_icp_binary_url}",
                    "download_user": "",
                    "download_user_password": "",
                    "icp_cluster_name": "${input_parameters.icp_cluster_name}",
                    "kube_apiserver_secure_port": "${input_parameters.kube_apiserver_secure_port}"
                  },
                  "outputs": [
                    "ibm_cloud_private_master_ip"
                  ]
                }
              }
            ],
            "resthooks": [],
            "notifications": [],
            "sequence": {
              "0": "ibmcloud305e7b07"
            },
            "error_sequence": {}
          },
          "output_parameters": []
        }
      ],
      "plans": [
        {
          "name": "Standard",
          "description": "To deploy a Standard plan",
          "actions": [],
          "plan_parameters": [],
          "expanded": false
        }
      ]
    }
  }
