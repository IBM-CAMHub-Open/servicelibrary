{
  "service": {
    "specVersion": "v3",
    "version": "2.0.0.0",
    "catalog_metadata": {
      "name": "Import existing kubernetes cluster into RHACM enabled IBM CP4MCM",
      "description": "Import an existing kubernetes cluster into RHACM enabled IBM CP4MCM",
      "image": "serviceicon_1.svg",
      "category": "Cluster Lifecycle Services",
      "bullets": [],
      "providerDisplayName": "Other",
      "longDescription": "Imports an existng kubernetes cluster into Red Hat Advanced Cluster Management enabled IBM Cloud Pak For Multicloud Management hub-cluster.",
      "documentationUrl": "https://www.ibm.com/support/knowledgecenter/SS2L37_3.2.1.0/content/cam_content_overview_summary.html",
      "supportUrl": "https://www.ibm.com/support/knowledgecenter/SS2L37_3.2.1.0/cam_ordering_services.html",
      "bindable": false,
      "updatable": "",
      "systemTags": true,
      "author": "admin"
    },
    "tags": [
      {
        "name": "environment",
        "label": "Environment",
        "type": "string",
        "immutable": false,
        "hidden": false,
        "required": true,
        "secured": false,
        "description": "Unique identifer added to the provisioned VMs.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Write",
        "options": [
          {
            "label": "Development",
            "value": "dev",
            "default": true
          },
          {
            "label": "Quality Assurance",
            "value": "qa",
            "default": false
          },
          {
            "label": "Production",
            "value": "prod",
            "default": false
          },
          {
            "label": "Test",
            "value": "test",
            "default": false
          }
        ]
      },    
      {
        "name": "Name",
        "label": "Name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.name}"
      },      
      {
        "name": "request_group",
        "label": "request_group",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The current context group id of the current user that requested the provisioning of the template. This is important because a user may be part of more than one group and this identifies the context of which group the user made the request.",
        "isSystemTag": true,
        "default": "${svc_instance.group}",
        "customtype": "string",
        "permission": "Read-Only"
      },
      {
        "name": "request_user",
        "label": "request_user",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The user id of the current user that requested the provisioning of the template.",
        "isSystemTag": true,
        "default": "${svc_instance.owner}",
        "customtype": "string",
        "permission": "Read-Only"
      },
      {
        "name": "service_name",
        "label": "service_name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "default": "${svc_instance.name}",
        "customtype": "string",
        "permission": "Read-Only"
      },
      {
        "name": "service_identifier",
        "label": "service_identifier",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Unique identifer generated by ICAM which is mapped to the service instance of the template provisioned.",
        "isSystemTag": true,
        "default": "${svc_instance.service_instance_id}",
        "customtype": "string",
        "permission": "Read-Only"
      }
    ],
    "actions": [
      {
        "type": "provision",
        "name": "Provision",
        "description": "Default action for deployment of service",
        "input_parameters": [
          {
            "name": "oc_login_info",
            "label": "OpenShift Container Platform Login Information",
            "customtype": "sharedparameter",
            "type": "sharedparameter",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "Connection details for an OpenShift Container Platform on which IBM CP4MCM is installed.",
            "default": "",
            "datatype": "oc_login_info"
          },        
          {
            "name": "cluster_name",
            "label": "Cluster name",
            "regex": "(?:[a-z](?:[-a-z0-9]{0,30}[a-z0-9])?)",
            "regexdesc": "Cluster name can have lower case alphabets, numbers and dash. Must start with lower case alphabet and end with alpha-numeric character. Maximum length is 32 characters.",                        
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "Name of the cluster to be imported"
          },
          {
            "name": "cluster_endpoint",
            "label": "Cluster endpoint",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "URL for the kubernetes cluster endpoint"
          },
          {
            "name": "cluster_user",
            "label": "Cluster user",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "User name for accessing the cluster"
          },
          {
            "name": "cluster_token",
            "label": "Authorization token",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": true,
            "description": "Token for authenticating with the cluster"
          },
          {
            "name": "kube_ctl_version",
            "label": "The kubectl version to run import commands. (Explicit version is recommended. Do not leave it as latest. Version format must be vM.m.p eg. v1.23.6) ",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "The kubectl version to use in import client. For compatibility reasons, this version must match the version in the kubernetes service. The latest client version may not be compatible with the latest kubernetes version used in the server. It is recommended that you set an explicit version. Version format must be vM.m.p eg. v1.23.6",
            "default": "latest"
          }
        ],
        "flow": {
          "conditions": [],
          "templates": [
            {
              "Import a kubernetes cluster into RHACM enabled IBM CP4MCM": {
                "title": "Import a kubernetes cluster into RHACM enabled IBM CP4MCM",
                "template_name": "Import a kubernetes cluster into RHACM enabled IBM CP4MCM for Terraform 1.x.x",
                "version": "5.2.0",
                "id": "importkucc2bc96e",
                "template_type": "Terraform",
                "template_content_type": "Other",
                "template_provider": "Other",
                "instance_name": "",
                "template_data_objects": {
                  "bastionhost": "DefaultNoBastionHostRequired",
                  "oc_login_info": "${input_parameters.oc_login_info}"
                },
                "template_params": {
                  "ocp_api_endpoint": "${oc_login_info.ocp_api_endpoint}",
                  "ocp_user": "${oc_login_info.ocp_user}",
                  "ocp_password": "${oc_login_info.ocp_password}",
                  "ocp_token": "${oc_login_info.ocp_token}",                  
                  "ocp_ca_cert": "${oc_login_info.ocp_ca_cert}",      
                  "cluster_name": "${input_parameters.cluster_name}",
                  "cluster_endpoint": "${input_parameters.cluster_endpoint}",
                  "cluster_user": "${input_parameters.cluster_user}",
                  "cluster_token": "${input_parameters.cluster_token}",
                  "kube_ctl_version": "${input_parameters.kube_ctl_version}"
                },
                "cloud_connection_names": [
                  {
                    "connection_name": "Other",
                    "provider": "Other"
                  }
                ],                
                "outputs": [],
                "error": false,
                "immutable": false,
                "provider_engine_version": "1.1.3"
              }
            }
          ],
          "resthooks": [],
          "notifications": [],
          "sequence": {
            "0": "importkucc2bc96e"
          },
          "error_sequence": {}
        },
        "output_parameters": []
      }
    ],
    "plans": [
      {
        "name": "Standard",
        "description": "To deploy a Standard plan",
        "actions": [],
        "plan_parameters": []
      }
    ]
  }
}
