{
  "service": {
    "version": "4.2.0.1",
    "specVersion": "v3",
    "catalog_metadata": {
      "name": "OCP cluster on Amazon EC2",
      "description": "",
      "image": "serviceicon_1.svg",
      "category": "Cluster Lifecycle Services",
      "bullets": [],
      "providerDisplayName": "IBM",
      "longDescription": "",
      "documentationUrl": "",
      "supportUrl": "",
      "bindable": false,
      "updatable": "",
      "systemTags": true
    },
    "tags": [
      {
        "name": "environment",
        "label": "Environment",
        "type": "string",
        "immutable": false,
        "hidden": false,
        "required": true,
        "secured": false,
        "description": "Unique identifer added to the provisioned VMs.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Write",
        "options": [
          {
            "label": "Development",
            "value": "dev",
            "default": true
          },
          {
            "label": "Quality Assurance",
            "value": "qa",
            "default": false
          },
          {
            "label": "Production",
            "value": "prod",
            "default": false
          },
          {
            "label": "Test",
            "value": "test",
            "default": false
          }
        ]
      },    
      {
        "name": "request_group",
        "label": "request_group",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The current context group id of the current user that requested the provisioning of the template. This is important because a user may be part of more than one group and this identifies the context of which group the user made the request.",
        "isSystemTag": true,
        "default": "${svc_instance.group}",
        "customtype": "string",
        "permission": "Read-Only"
      },
      {
        "name": "request_user",
        "label": "request_user",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The user id of the current user that requested the provisioning of the template.",
        "isSystemTag": true,
        "default": "${svc_instance.owner}",
        "customtype": "string",
        "permission": "Read-Only"
      },
      {
        "name": "service_name",
        "label": "service_name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "default": "${svc_instance.name}",
        "customtype": "string",
        "permission": "Read-Only"
      },
      {
        "name": "service_identifier",
        "label": "service_identifier",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Unique identifer generated by ICAM which is mapped to the service instance of the template provisioned.",
        "isSystemTag": true,
        "default": "${svc_instance.service_instance_id}",
        "customtype": "string",
        "permission": "Read-Only"
      }
    ],
    "actions": [
      {
        "type": "provision",
        "name": "Provision",
        "description": "Default action for deployment of service",
        "input_parameters": [
          {
            "name": "connection",
            "label": "Cloud Connection",
            "customtype": "connection",
            "type": "connection",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "",
            "view": "create new",
            "default": "",
            "provider": "Amazon EC2"
          },
          {
            "name": "mcm_controller",
            "label": "MCM Controller",
            "customtype": "sharedparameter",
            "type": "sharedparameter",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "default": "",
            "datatype": "mcm_controller",
            "passbyname": false,
            "dynamicDetails": {}
          },
          {
            "name": "region",
            "label": "Region",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "isDynamic": false,
            "options": [
              {
                "label": "US East (N. Virginia)",
                "value": "us-east-1",
                "default": true
              },
              {
                "label": "US East (Ohio)",
                "value": "us-east-2",
                "default": false
              },
              {
                "label": "US West (N. California)",
                "value": "us-west-1",
                "default": false
              },
              {
                "label": "US West (Oregon)",
                "value": "us-west-2",
                "default": false
              },
              {
                "label": "US GovCloud Region",
                "value": "us-gov-west-1",
                "default": false
              },
              {
                "label": "Canada (Central)",
                "value": "ca-central-1",
                "default": false
              },
              {
                "label": "EU (Ireland)",
                "value": "eu-west-1",
                "default": false
              },
              {
                "label": "EU (Frankfurt)",
                "value": "eu-central-1",
                "default": false
              },
              {
                "label": "EU (London)",
                "value": "eu-west-2",
                "default": false
              },
              {
                "label": "Asia Pacific (Tokyo)",
                "value": "ap-northeast-1",
                "default": false
              },
              {
                "label": "Asia Pacific (Seoul)",
                "value": "ap-northeast-2",
                "default": false
              },
              {
                "label": "Asia Pacific (Singapore)",
                "value": "ap-southeast-1",
                "default": false
              },
              {
                "label": "Asia Pacific (Sydney)",
                "value": "ap-southeast-2",
                "default": false
              },
              {
                "label": "Asia Pacific (Mumbai)",
                "value": "ap-south-1",
                "default": false
              },
              {
                "label": "South America (SÃ£o Paulo)",
                "value": "sa-east-1",
                "default": false
              }
            ]
          },
          {
            "name": "availability_zones",
            "label": "Availability Zones",
            "description": "The availability zone letter identifier in the above selected region. For high availability should have at least 3 availability zones. Setting to a single availability zone will disable high availability and not provision EFS, in this case, reduce the number of master and proxy nodes to 1. If you are installing this service from ICP Catalog, your input should look like [\"a\", \"b\"]",
            "type": "list",
            "default": [
              "a",
              "b",
              "c"
            ],
            "customtype": "list",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "key_pair_name",
            "label": "Key Pair Name",
            "description": "Name of the EC2 key pair.",
            "type": "string",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "key_pair_private_key",
            "label": "Key Pair Private Key",
            "description": "Base64 encoded private key file contents of the EC2 key pair.",
            "type": "string",
            "regex": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$",
            "regexdesc": "Enter a valid base64 encoded text. Base64 encoded text contains alphanumeric characters and equals symbol as padding.",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "s3_bucket",
            "label": "S3 Bucket",
            "description": "AWS VPC Name prefix. This value is used to prefix the VPC created for ICP nodes.",
            "type": "string",
            "default": "",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "redhat_pull_secret",
            "label": "Redhat Pull Secret (base64 encoded)",
            "description": "AWS VPC CIDR block. This is the primary CIDR block for your ICP node VPC.",
            "type": "string",
            "default": "",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false,
            "regex": "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$",
            "regexdesc": "Enter a valid base64 encoded text. Base64 encoded text contains alphanumeric characters and equals symbol as padding."
          },
          {
            "name": "cluster_name",
            "label": "Cluster Name",
            "description": "Subnet name prefix for public and private subnets used by ICP nodes.",
            "type": "string",
            "default": "ocp-cluster",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "domain_name",
            "label": "Public Domain Name",
            "description": "List of subnet CIDRs. Total number of CIDR entry must match the number of availability zone provided above. A CIDR value is used in the creation of a private subnet in an availability zone for the worker nodes. If you are installing this service from ICP Catalog, your input should look like [\"10.10.10.0/24\", \"10.10.11.0/24\"]",
            "type": "string",
            "default": "",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "vpc_cidr",
            "label": "VPC CIDR",
            "description": "List of subnet CIDRs. Total number of CIDR entry must match the number of availability zone provided above. A CIDR value is used in the creation of a public subnet in an availability zone for the proxy and management nodes. If you are installing this service from ICP Catalog, your input should look like [\"10.10.20.0/24\", \"10.10.21.0/24\"]",
            "type": "string",
            "default": "10.0.0.0/16",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "public_subnet_cidrs",
            "label": "Public Subnet CIDRs",
            "description": "Private domain name that is used to create route53 name.",
            "type": "list",
            "default": [
              "10.0.10.0/24",
              "10.0.11.0/24",
              "10.0.12.0/24"
            ],
            "customtype": "list",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "private_subnet_cidrs",
            "label": "Private Subnet CIDRs",
            "description": "Default Amazon Machine Image ID that will be used if AMI ID for individual node is not provided.",
            "type": "list",
            "default": [
              "10.0.20.0/24",
              "10.0.21.0/24",
              "10.0.22.0/24"
            ],
            "customtype": "list",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "bastion_instance_type",
            "label": "Bastion Instance Type",
            "description": "Master node details. Each master node will be created in a different AZS. Number of AZS, public subnet and private subnet must match the number of master node.",
            "type": "string",
            "default": "t2.small",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "bastion_volume_size",
            "label": "Bastion Disk Size (GiB)",
            "description": "Proxy node details. Each proxy node will be created in a different AZS. Number of AZS, public subnet and private subnet must match the number of proxy node.",
            "type": "string",
            "default": "50",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "bootstrap_node_count",
            "label": "Create a New or Destroy the Existing Bootstrap",
            "description": "Management node details. Each management node will be created in a different AZS. Number of AZS, public subnet and private subnet must match the number of management node.",
            "type": "string",
            "default": "1",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "bootstrap_instance_type",
            "label": "Bootstrap Instance Type",
            "description": "Worker node details. Each worker node will be created in a different AZS. Number of AZS, public subnet and private subnet must match the number of worker node.",
            "type": "string",
            "default": "i3.large",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "bootstrap_volume_size",
            "label": "Bootstrap Disk Size (GiB)",
            "description": "Vulnerability Advisor node details. Each VA node will be created in a different AZS. Number of AZS, public subnet and private subnet must match the number of VA node.",
            "type": "string",
            "default": "120",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "master_node_count",
            "label": "Number of Master Nodes",
            "description": "ICP Cluster Name",
            "type": "string",
            "default": "3",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "master_instance_type",
            "label": "Master Instance Type",
            "description": "ICP user password",
            "type": "string",
            "default": "m4.xlarge",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "master_volume_size",
            "label": "Master Volume Size",
            "description": "Docker package location is required when installing ICP EE on RedHat. Prefix the location string with protocol. Example s3://, http:// or nfs://. ",
            "type": "string",
            "default": "120",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "worker_node_count",
            "label": "Number of Worker Nodes",
            "description": "Image location of ICP EE. Prefix the location string with protocol Example: s3://, http:// or nfs://.",
            "type": "string",
            "default": "2",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "worker_instance_type",
            "label": "Worker Instance Type",
            "description": "Name of the bootstrap installation image.",
            "type": "string",
            "default": "m4.large",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          },
          {
            "name": "worker_volume_size",
            "label": "Worker Disk Size (GiB)",
            "type": "string",
            "default": "120",
            "customtype": "string",
            "immutable": false,
            "hidden": false,
            "required": false,
            "secured": false,
            "passbyname": false,
            "dynamicDetails": {},
            "isDynamic": false
          }
        ],
        "flow": {
          "conditions": [],
          "templates": [
            {
              "Openshift Container Platform Cluster on Amazon Web Services for Terrafrom 0.12.x": {
                "title": "Openshift Container Platform Cluster on Amazon Web Services for Terrafrom 0.12.x",
                "template_name": "Openshift Container Platform Cluster on Amazon Web Services for Terrafrom 0.12.x",
                "version": "4.2",
                "id": "opencont75cd622b",
                "template_type": "Terraform",
                "template_content_type": "Amazon EC2",
                "template_provider": "Amazon EC2",
                "instance_name": "",
                "cloud_connection_name": "${input_parameters.connection}",
                "template_data_objects": {},
                "template_params": {
                  "region": "${input_parameters.region}",
                  "availability_zones": "${input_parameters.availability_zones}",
                  "key_pair_name": "${input_parameters.key_pair_name}",
                  "key_pair_private_key": "${input_parameters.key_pair_private_key}",
                  "s3_bucket": "${input_parameters.s3_bucket}",
                  "redhat_pull_secret": "${input_parameters.redhat_pull_secret}",
                  "cluster_name": "${input_parameters.cluster_name}",
                  "domain_name": "${input_parameters.domain_name}",
                  "vpc_cidr": "${input_parameters.vpc_cidr}",
                  "public_subnet_cidrs": "${input_parameters.public_subnet_cidrs}",
                  "private_subnet_cidrs": "${input_parameters.private_subnet_cidrs}",
                  "bastion_node_count": "1",
                  "bastion_instance_type": "${input_parameters.bootstrap_instance_type}",
                  "bastion_volume_size": "${input_parameters.bastion_volume_size}",
                  "bootstrap_node_count": "${input_parameters.bootstrap_node_count}",
                  "bootstrap_instance_type": "${input_parameters.bootstrap_instance_type}",
                  "bootstrap_volume_size": "${input_parameters.bootstrap_volume_size}",
                  "master_node_count": "${input_parameters.master_node_count}",
                  "master_instance_type": "${input_parameters.master_instance_type}",
                  "master_volume_size": "${input_parameters.master_volume_size}",
                  "worker_node_count": "${input_parameters.worker_node_count}",
                  "worker_instance_type": "${input_parameters.worker_instance_type}",
                  "worker_volume_size": "${input_parameters.worker_volume_size}"
                },
                "outputs": [
                  "cluster_name",
                  "bastion_public_ip",
                  "bootstrap_public_ip",
                  "ocp_web_console",
                  "ocp_api_url",
                  "ocp_oauth_url",
                  "admin_user",
                  "admin_password",
                  "kubeconfig",
                  "kubeadmin_user",
                  "kubeadmin_password"
                ],
                "immutable": false,
                "provider_engine_version": "0.12.21",
                "isErrorFlow": false
              }
            },
            {
              "Import OpenShift Container Platform Kubernetes cluster into MCM hub-cluster for Terraform 0.12.x": {
                "title": "Import OpenShift Container Platform Kubernetes cluster into MCM hub-cluster for Terraform 0.12.x_2c157c",
                "template_name": "Import OpenShift Container Platform Kubernetes cluster into MCM hub-cluster for Terraform 0.12.x",
                "version": "5.0.0",
                "id": "importopba788014",
                "template_type": "Terraform",
                "template_content_type": "Other",
                "template_provider": "Other",
                "instance_name": "",
                "cloud_connection_name": "Other",
                "template_data_objects": {
                  "bastionhost": "DefaultNoBastionHostRequired",
                  "mcm_controller": "${input_parameters.mcm_controller}"
                },
                "template_params": {
                  "mcm_url": "${mcm_controller.icp_url}",
                  "mcm_admin_user": "${mcm_controller.icp_admin_user}",
                  "mcm_admin_password": "${mcm_controller.icp_admin_password}",
                  "cluster_name": "${templates.opencont75cd622b.output.cluster_name}",
                  "cluster_namespace": "${templates.opencont75cd622b.cluster_name}-ns",
                  "ocp_url": "${templates.opencont75cd622b.output.ocp_api_url}",
                  "ocp_oauth_url": "${templates.opencont75cd622b.output.ocp_oauth_url}",
                  "ocp_admin_user": "${templates.opencont75cd622b.output.admin_user}",
                  "ocp_admin_password": "${templates.opencont75cd622b.output.admin_password}",
                  "image_registry": "",
                  "image_suffix": "",
                  "image_version": "",
                  "docker_user": "",
                  "docker_password": ""
                },
                "outputs": [],
                "immutable": false,
                "provider_engine_version": "0.12.21",
                "isErrorFlow": false
              }
            }
          ],
          "resthooks": [],
          "notifications": [],
          "sequence": {
            "0": "opencont75cd622b",
            "1": "importopba788014"
          },
          "error_sequence": {}
        },
        "output_parameters": []
      }
    ],
    "plans": [
      {
        "name": "Standard",
        "description": "To deploy a Standard plan",
        "actions": [],
        "plan_parameters": []
      }
    ]
  }
}