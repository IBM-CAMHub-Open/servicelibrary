{
    "service": {
      "version": "1.0.0.0",
      "specVersion": "v3",
      "catalog_metadata": {
        "name": "Virtual Machine on AWS",
        "description": "Deploys EC2 instance on AWS",
        "image": "serviceicon_1.svg",
        "category": "Virtual Machine",
        "bullets": [
          {
            "title": "Github link",
            "description": "https://github.com/IBM-CAMHub-Open/servicelibrary/tree/5.0.0/Services/VirtualMachine/AWS"
          }
        ],
        "providerDisplayName": "IBM",
        "longDescription": "Deploys EC2 instance on AWS",
        "documentationUrl": "",
        "supportUrl": "",
        "bindable": false,
        "updatable": "",
        "systemTags": true
      },
      "tags": [
        {
          "name": "request_group",
          "label": "request_group",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "The current context group id of the current user that requested the provisioning of the template. This is important because a user may be part of more than one group and this identifies the context of which group the user made the request.",
          "isSystemTag": true,
          "default": "${svc_instance.group}",
          "customtype": "string",
          "permission": "Read-Only"
        },
        {
          "name": "request_user",
          "label": "request_user",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "The user id of the current user that requested the provisioning of the template.",
          "isSystemTag": true,
          "default": "${svc_instance.owner}",
          "customtype": "string",
          "permission": "Read-Only"
        },
        {
          "name": "service_name",
          "label": "service_name",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "Name provided for the service instance by the end user at time of request",
          "isSystemTag": true,
          "default": "${svc_instance.name}",
          "customtype": "string",
          "permission": "Read-Only"
        },
        {
          "name": "service_identifier",
          "label": "service_identifier",
          "type": "string",
          "immutable": true,
          "hidden": false,
          "required": false,
          "secured": false,
          "description": "Unique identifer generated by ICAM which is mapped to the service instance of the template provisioned.",
          "isSystemTag": true,
          "default": "${svc_instance.service_instance_id}",
          "customtype": "string",
          "permission": "Read-Only"
        }
      ],
      "upgrade_from": [],
      "downgrade_to": [],
      "actions": [
        {
          "type": "provision",
          "name": "Provision",
          "description": "Default action for deployment of service",
          "input_parameters": [
            {
              "name": "Connection",
              "label": "AWS Connection",
              "customtype": "connection",
              "type": "connection",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "",
              "view": "create new",
              "editable": true,
              "default": "",
              "provider": "Amazon EC2",
              "passbyname": false,
              "dynamicDetails": {},
              "isDynamic": false
            },
            {
              "name": "region",
              "label": "Region",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": false,
              "secured": false,
              "isDynamic": true,
              "editable": true,
              "dynamicDetails": {
                "provider": "AWS",
                "assetType": "regions",
                "dependsOn": {
                  "cloud_connection": "${input_parameters.Connection}"
                }
              },
              "passbyname": false
            },
            {
              "name": "vpc_name_tag",
              "label": "Virtual Private Cloud",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Name of the Virtual Private Cloud (VPC) this resource is going to be deployed into",
              "view": "create new",
              "editable": true,
              "passbyname": true,
              "dynamicDetails": {
                "provider": "AWS",
                "assetType": "vpcs",
                "dependsOn": {
                  "cloud_connection": "${input_parameters.Connection}",
                  "region": "${input_parameters.region}"
                }
              },
              "isDynamic": true
            },
            {
              "name": "subnet_name",
              "label": "Subnet Name",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Subnet Name",
              "view": "create new",
              "editable": true,
              "passbyname": true,
              "dynamicDetails": {
                "provider": "AWS",
                "assetType": "subnets",
                "dependsOn": {
                  "cloud_connection": "${input_parameters.Connection}",
                  "region": "${input_parameters.region}",
                  "vpc_id": "${input_parameters.vpc_name_tag}"
                }
              },
              "isDynamic": true
            },
            {
              "name": "public_ssh_key_name",
              "label": "Public SSH Key Name",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Name of the public SSH key used to connect to the virtual guest",
              "view": "create new",
              "editable": true
            },
            {
              "name": "public_ssh_key",
              "label": "Public SSH Key",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Public SSH key used to connect to the virtual guest",
              "view": "create new",
              "editable": true
            },
            {
              "name": "aws_image",
              "label": "Operating System ID",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Operating system image id / template that should be used when creating the virtual image",
              "view": "create new",
              "editable": true,
              "default": "ubuntu/images/hvm-ssd/ubuntu-trusty-14.04-amd64-server-*"
            },
            {
              "name": "aws_image_size",
              "label": "AWS Image Instance Size",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "AWS Image Instance Size",
              "view": "create new",
              "editable": true,
              "default": "t2.small"
            },
            {
              "name": "aws_ami_owner_id",
              "label": "AWS AMI Owner ID",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "AWS AMI Owner ID",
              "view": "create new",
              "editable": true,
              "default": "099720109477"
            }
          ],
          "flow": {
            "conditions": [],
            "templates": [
              {
                "Amazon EC2 Virtual Server with SSH key": {
                  "title": "Amazon EC2 Virtual Server with SSH key_37db7b",
                  "template_name": "Amazon EC2 Virtual Server with SSH key",
                  "version": "2.4",
                  "id": "amazoneca26d044a",
                  "template_type": "Terraform",
                  "template_content_type": "Amazon EC2",
                  "template_provider": "Amazon EC2",
                  "instance_name": "",
                  "cloud_connection_name": "${input_parameters.Connection}",
                  "template_data_objects": {},
                  "template_params": {
                    "aws_region": "us-east-1",
                    "aws_image": "${input_parameters.aws_image}",
                    "aws_image_size": "${input_parameters.aws_image_size}",
                    "aws_ami_owner_id": "${input_parameters.aws_ami_owner_id}",
                    "vpc_name_tag": "${input_parameters.vpc_name_tag}",
                    "subnet_name": "${input_parameters.subnet_name}",
                    "public_ssh_key_name": "${input_parameters.public_ssh_key_name}",
                    "public_ssh_key": "${input_parameters.public_ssh_key}"
                  },
                  "outputs": [
                    "ip_address"
                  ],
                  "editable": true,
                  "provider_engine_version": "0.11.11",
                  "isErrorFlow": false
                }
              }
            ],
            "resthooks": [],
            "notifications": [],
            "sequence": {
              "0": "amazoneca26d044a"
            },
            "error_sequence": {}
          },
          "output_parameters": [
            {
              "name": "ip_address",
              "label": "IP Address",
              "customtype": "string",
              "type": "string",
              "immutable": true,
              "hidden": false,
              "required": false,
              "secured": false,
              "default": "${templates.amazoneca26d044a.output.ip_address}"
            }
          ]
        }
      ],
      "plans": [
        {
          "name": "Standard",
          "description": "To deploy a Standard plan",
          "actions": [],
          "plan_parameters": []
        },
        {
          "name": "Advance",
          "description": "To deploy a Advance plan",
          "plan_parameters": [
            {
              "name": "aws_image",
              "label": "Operating System ID",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "Operating system image id / template that should be used when creating the virtual image",
              "editable": true,
              "default": ""
            },
            {
              "name": "aws_image_size",
              "label": "AWS Image Instance Size",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "AWS Image Instance Size",
              "editable": true,
              "default": ""
            },
            {
              "name": "aws_ami_owner_id",
              "label": "AWS AMI Owner ID",
              "customtype": "string",
              "type": "string",
              "immutable": false,
              "hidden": false,
              "required": true,
              "secured": false,
              "description": "AWS AMI Owner ID",
              "editable": true,
              "default": ""
            }
          ]
        }
      ]
    }
  }